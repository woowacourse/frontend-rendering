# 🧐 2단계 - 렌더링 방식의 분석

## ✅ 체크리스트

### 렌더링 시점 비교

제가 선택한 방식으로 구현한 경우에는 프로젝트 로드 초기에 로딩 페이지를 띄울 수 있습니다.

CSR의 경우에는 빈 html 파일에서 시작한 후, js bundle이 수신될 때 까지 아무것도 그릴 수 없습니다.
하지만 SSG의 경우에는 이미 빌드 시점에 html 파일을 어느 정도 만들고 시작합니다.
제 프로젝트의 경우에는 React Wrapper가 초기 렌더링 할 `로딩 페이지`를 그리도록 유도하므로 로딩 페이지가 이미 완성된 상태로 빌드됩니다.
(하지만 styled-components가 빠져있어 css가 적용되어 있지 않은 상태입니다.)
따라서 css in js 사용을 피한다면 조금 더 빠르면서 디자인이 입혀진 로딩 페이지를 보여줄 수 있을 것입니다.

### 사용자 경험(UX) 측면 분석

카페인 서비스에서 가장 큰 문제점은 지도가 로드되기 이전에 사용자가 아무 작업도 수행할 수 없다는 것입니다. JavaScript 파일이 로드되어도, react wrapper의 js-loader가 지도 라이브러리를 나중에 받을 수 있으므로 렌더링 방식 변경이 사용자 경험을 크게 향상시키지는 않을 것으로 생각했습니다.

주요 페이지의 데이터가 자주 변경되는 서비스의 경우, ISR를 적극적으로 도입하면 관련 정보를 사전에 렌더링할 수 있습니다. 특히 게시판과 같이 빌드 시점에서 페이지 진입을 위한 API를 사용하여 ID를 미리 가져오고, 해당 정보를 기반으로 상세 페이지들을 사전 렌더링하면 사용자 경험을 크게 개선할 수 있을 것입니다. 

카페인 서비스는 페이지 개념이 없고, 사용자 위치에 따라 정보를 동적으로 제공하므로 사전 렌더링 개념이 적용하기 어렵다는 점이 아쉬웠습니다. 하지만 전형적인 웹 사이트를 구현할 때에는 "빌드된 파일이 특정 시점에만 업데이트"되는 ISR 형태로 구현해볼 것입니다.

### 성능 측정 및 비교

성능 측정을 위해 기존 서비스를 거의 그대로 마이그레이션한 상태입니다.

크롬의 퍼포먼스 탭을 활용하여 테스트를 수행하였습니다.

[기존]

![기존](https://github.com/woowacourse/frontend-rendering/assets/69189073/d942883a-98fa-46b4-88a7-a20b5d882e2f)

[next.js 13]

![next.js 13](https://github.com/woowacourse/frontend-rendering/assets/69189073/5d752383-c4b6-4b68-a859-5cbafd5f2d0f)

SSG가 항상 렌더링 시간에서 이점을 제공하지만, 큰 차이를 느끼기 어려울 정도로 시간 차이가 크게 나지 않았습니다. 이는 저희 서비스가 굉장히 동적인 성격을 가지고 있기 때문일 것입니다.
