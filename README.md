# 🎯 2단계 - 렌더링 방식 탐구 및 비교 분석

## 1. 렌더링 시점의 비교

### CRS (Client Side Rendering)

- 사용자가 페이지를 요청할 때, 최초 한 번만 서버로부터 HTML, CSS, JavaScript 파일을 전달 받습니다. 이후 모든 뷰의 전환과 데이터 처리는 클라이언트 측에서 JavaScript를 통해 진행됩니다. 추가적인 페이지 요청 시, 서버로부터 새로운 HTML을 받는 것이 아니라, 필요한 데이터만 가져와서 페이지를 업데이트 합니다.

1️⃣ 사용자 페이지 요청

2️⃣ 서버에서 HTML, CSS, JS 파일 전달

3️⃣ 클라이언트에서 JS 실행

4️⃣ JS가 추가 데이터 필요 시 API 요청

5️⃣ 데이터 받아와서 페이지 업데이트

### SSR (Server Side Rendering)

- 사용자가 페이지를 요청할 때마다 해당 페이지의 컨텐츠에 맞게 서버에서 HTML을 생성합니다. 이렇게 생성된 HTML은 클라이언트에 전달되어 화면에 렌더링됩니다. JS 파일은 클라이언트에서 별도로 로드되어, 이후 동작들을 수행하게 됩니다.

1️⃣ 사용자 페이지 요청

2️⃣ 서버에서 해당 페이지 데이터와 함께 HTML 생성

3️⃣ 생성된 HTML 클라이언트에 전달

4️⃣ 클라이언트에서 JS 파일 로드 및 실행

5️⃣ 필요한 경우 클라이언트에서 추가 API 요청 후 페이지 업데이트

### SSG (Static Site Generation)

- 빌드 시점에 서버에서 모든 가능한 페이지를 미리 HTML로 생성합니다. 사용자가 페이지를 요청하면, 미리 생성된 정적 HTML 파일을 제공합니다. 따라서, 사용자는 빠르게 페이지를 볼 수 있게 됩니다. JS 파일은 클라이언트에서 별도로 로드되어, 추가적인 기능들을 수행합니다.

1️⃣ 빌드 시점: 서버에서 모든 페이지를 HTML로 미리 생성

2️⃣ 사용자 페이지 요청

3️⃣ 미리 생성된 정적 HTML 파일 클라이언트에 전달

4️⃣ 클라이언트에서 JS 파일 로드 및 실행

5️⃣ 필요한 경우 클라이언트에서 추가 API 요청 후 페이지 업데이트

### ISR (Incremental Static Regeneration)

- SSG의 방식을 기반으로 합니다. 하지만, 일부 페이지에 변경이 발생한 경우, 그 페이지만 재생성됩니다. 이렇게 재생성된 페이지는 다음 사용자 요청 때 제공됩니다. 기존에 방문한 사용자는 변경 전 페이지를 보게 될 수 있으므로, 일관된 데이터를 보장하기 위한 추가적인 처리가 필요할 수 있습니다. JS 파일도 클라이언트에서 별도로 로드되며, 페이지의 동적 처리를 위해 사용됩니다.

이렇게 각 렌더링 방식은 JS, HTML을 불러오는 시점과 방법에 따라 사용자에게 다른 경험을 제공합니다.

1️⃣ 빌드 시점: 서버에서 모든 페이지를 HTML로 미리 생성

2️⃣ 사용자 페이지 요청

3️⃣ 미리 생성된 정적 HTML 파일 클라이언트에 전달 (데이터 변경 시 재생성된 페이지 제공)

4️⃣ 클라이언트에서 JS 파일 로드 및 실행

5️⃣ 필요한 경우 클라이언트에서 추가 API 요청 후 페이지 업데이트

## 2. 사용자 경험(UX) 측면 분석

### 2.1. CSR

- **장점**: 초기 로딩 후 빠른 페이지 전환으로 사용자 경험이 좋습니다.
- **단점**: 초기 로딩 속도가 느릴 수 있으며 SEO 최적화에 친화적이지 않습니다.

### 2.2. SSR

- **장점**: 초기 페이지 로딩 속도가 빠르며, SEO에 유리합니다.
- **단점**: 매번 서버에서 렌더링해야 하므로 서버 부하가 클 수 있습니다.

### 2.3. SSG

- **장점**: 빠른 페이지 로딩 속도, 빌드 타임에 HTML 파일이 생성되기 때문에 빠른 FP, FCP, TTI를 제공합니다.
- **단점**: 사이트의 동적 데이터를 실시간으로 반영하기 어렵습니다. 또한, 모든 URL에 대해 개별 HTML 파일을 생성해야 합니다. URL을 예측할 수 없으면 적용이 어렵습니다.

### 2.4. ISR

- **장점**: SSG의 장점 + 동적 데이터의 실시간 반영이 가능합니다.
- **단점**: 재생성 시점의 관리가 필요합니다.

## 3. 선택) 성능 측정 및 비교 (기존 바톤 - CSR vs 미션용 바톤 - SSR)

- 메인페이지에서의 렌더링 + 라이트하우스 테스트를 해보았습니다.

### 렌더링 비교

- CSR
  ![CSR](https://github.com/gyeongza/2023-baton/assets/62369936/d5e810cf-933c-43e1-9e1c-395ce730af02)
- SSR
  ![SSR](https://github.com/gyeongza/2023-baton/assets/62369936/345cd949-277f-4e9e-9f01-0e16c87700f6)

- 메인페이지 게시물 조회가 SSR방식입니다. 기존 사이트는 게시물 포함 페이지 전체가 사용자 요청 후에 그려지지만 SSR의 경우 이미 데이터를 렌더링한 상태로 받아오고 그 다음에 이미지를 불러옵니다.

### 라이트 하우스 측정 비교

- CSR
  ![스크린샷 2023-10-16 오후 9 51 07](https://github.com/gyeongza/2023-baton/assets/62369936/08b6ead7-985d-4655-8019-b68c23e4cae9)
- SSR
  ![스크린샷 2023-10-16 오후 9 50 59](https://github.com/gyeongza/2023-baton/assets/62369936/39005b01-4248-4584-aa38-cca81be32e47)

- 정확한 측정은 어려우나 SEO 점수는 꽤 차이가 나는 것을 확인할 수 있었습니다. 또한 LCP 점수가 SSR 방식이 더 높게 나왔습니다.
